{% extends 'base.html.twig' %}
{% block stylesheets %}
	<link href="{{ asset('css/tricks.css') }}" rel="stylesheet"/>
{% endblock %}

{% block title %}Trick
{% endblock %}

{% block body %}
	<h1>Figure</h1>

	<table class="table">
		<tbody>
			<div class="homepage-image-container">
				<img src="{{ asset('uploads/images/' ~ trick.tricksImages.first().getImagePath()) }}" alt="{{ trick.name }}" class="homepage-image img-fluid">
				<div class="homepage-image-content">
					<h1 class="text-center text-white">{{ trick.name }}</h1>
				</div>
			</div>


			<div class="row">
				{% for image in trick.tricksImages %}
					<div class="card my-3" style="width: 18rem;">
						<img src="{{ asset('uploads/images/' ~ image.getImagePath()) }}" class="card-img-top" alt="{{ trick.name }}">
					</div>
				{% endfor %}
				{% for video in trick.trickVideos %}
					<div class="card my-3" style="width: 18rem;">
						<iframe src="{{ video.url }}" class="card-img-top"></iframe>
					</div>
				{% endfor %}
			</div>

			<tr>
				<td class="container-fluid bg-2 text-center">{{ trick.description }}</td>
			</tr>

			<tr>
				<td>{{ trick.name }}</td>
			</tr>

			{% if app.user %}
				<h3>Ajouter un commentaire:</h3>
				{{ form_start(commentForm) }}
				{{ form_widget(commentForm) }}
				{{ form_end(commentForm) }}
			{% else %}
				<p>Vous devez être connecté pour ajouter un commentaire.</p>
			{% endif %}

			{% for comment in comments %}
				<div class="comment">
					<img src="{{ asset('/picture_profil/picture.png' ~ comment.user.profilePicture) }}" alt="Photo de profil"/>
					<h3>{{ comment.user.username }}</h3>
					<p>{{ comment.dateCreated|date('d/m/Y H:i') }}</p>
					<p>{{ comment.content }}</p>
				</div>
			{% endfor %}

		</tbody>
	</table>

	<a href="{{ path('app_trick_index') }}">back to list</a>

	<a href="{{ path('app_trick_edit', {'slug': trick.slug}) }}">edit</a>

	{{ include('trick/_delete_form.html.twig') }}

	<style>
		.homepage-image-container {
			position: relative;
			max-height: 650px; /* Définir la hauteur maximale souhaitée */
			overflow: hidden;
		}

		.homepage-image {
			width: 100%;
			height: auto;
		}

		.homepage-image-content {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
		}

		.img-responsive {
			height: 500px;
			width: auto;
		}
	</style>


{% endblock %}
